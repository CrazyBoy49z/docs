Компонент реализует функционал - список избранного, добавление/удаление ресурсов, а также товаров [miniShop2][1] в избранное. Формирование списка избранного.

**Доступно:**  
 — различные списки избранного  
 — несколько режимов работы пакета  

демо как всегда [тут][2]

**Доступно несколько режимов работы:**  

- списки избранного **только для авторизованных** пользователей

- списки избранного **только для анонимов**

- списки избранного **для всех пользователей**

###для авторизованных пользователей
 Сохраняет списки только в бд. При попытке неавторизованного пользователя добавить ресурс в список выводится предупреждение. Так же можно отключить вывод ссылок для неавторизованных.(см. настройки сниппета — **[msFavorites]**)
[![](https://file.modx.pro/files/c/0/8/c089179e1fdaa48146a54803d7b3a2c6s.jpg)](https://file.modx.pro/files/c/0/8/c089179e1fdaa48146a54803d7b3a2c6.png)

###для анонимных пользователей
 Сохраняет списки в сессии. Работает для всех пользователей, независимо от авторизации.(первоначальный режим работы пакета).   
 p.s. Возможно не совсем логично назвал, но пусть будет так…  

###для всех пользователей
 Совмещает в себе два предыдущих режима работы.   
 Если пользователь неавторизован — то при добавлении ресурса в список избранного пользователь увидит предупреждение.  
[![](https://file.modx.pro/files/a/c/b/acbd317a816f3a91c81c028093d9155ds.jpg)](https://file.modx.pro/files/a/c/b/acbd317a816f3a91c81c028093d9155d.png)

 Ресурс сохранится в сессии. При авторизации пользователя список избранного будет автоматически перенесен в бд(при этом список в сессии будет очищен) и включится режим работы пакета для авторизованного пользователя.   

### Настройки модуля
Для редактирования настроек скрипта перейдите в раздел "Настройки системы" и выберите фильтр "msFavorites"
[![](https://file.modx.pro/files/6/d/1/6d1800f59886e72afa3b510970fafd97s.jpg)](https://file.modx.pro/files/6/d/1/6d1800f59886e72afa3b510970fafd97.png)

* файл c javascript на фронте сайта
* файл c css на фронте сайта

### подключение ссылок
в шаблоне товара (ресурса) необходимо вызвать сниппет [msFavorites]

**id** — id ресурса для добавления в список, по умолчанию текущий ресурс  
**list** — произвольное имя списка избранного  
**list_id** — id ресурса списка избранного, нужен для формирования ссылки на список  
**tpl** — чанк ссылок  
**user_id** — id пользователя в список которого будет добавлен ресурс, по умолчанию текущий пользователь  
**nouserhide** — прятать ли ссылки для неавторизованных пользователей, по умолчанию — НЕТ  

```
[[!msf.favorites?
	&id=`[[+id]]`
	&list=`mylist`
	&list_id=`10`
	&tpl=`tpl.msFavorites.add`
]]
```

### вывод на сайте
вывести список избранных ресурсов можно любым сниппетом. Рекомендую для обычных ресурсов использовать - pdoResources[3], а для товаров minishop2 - msProducts[4]. Необходимо лишь передать список ресурсов в сниппет.
Список избранных ресурсов получает сниппет - [msFavoritesList]

**list** — произвольное имя списка избранного  
**user_id** — id пользователя, по умолчанию текущий пользователь 

```
[[!msf.ids?
	&list=`mylist`
	&toPlaceholder=`list`
]]
<div class="msfavorites-list">
[[!msProducts:default=`список пуст`?
	&resources=`[[!+list]]`
	&tpl=`tpl.msProducts.row.new`
	&parents=`0`
]]
</div>
```

### помните!
Для корректной работы дефолтного скрипта нужно:

* Списов избранного необходимо обернуть в 
```
<div class="msfavorites-list">....список...</div>
```

[1]: /ru/01_Компоненты/02_miniShop2/
[2]: http://demo.vgrish.ru/
[3]: /ru/01_Компоненты/01_pdoTools/01_Сниппеты/01_pdoResources.md
[4]: /ru/01_Компоненты/02_miniShop2/02_Сниппеты/01_msProducts.md
